---
title: LabVIEW Simulation module与第三方模型（AMESim）的互联性
id: 32
categories:
  - Uncategorized
date: 2008-08-06 02:09:05
tags:
---

<div id="msgcns!866B8F96A2761BBE!1101" class="bvMsg">

  <p>**安装要求** <p>LabVIEW的版本为：8.2, 8.2.1, 8.5 （当前版本为8.5）并需要安装RT（实时）和CDS（控制设计和仿真）模块。 <p>需要支持LabVIEW Cosim Interface的license.dat（由LMS公司提供，放置在D:AMESimv800licensing目录下）。 <p>需要安装Microsoft Visual C++ 6.0以上版本（英文版）。 <p>操作系统必须为为Windows。 <p>**许可配置** <p>AMESim的许可配置及编译器的选择（微软VC++编译器） <p>实时目标机许可配置： <p>将rttargetslicenses.h 文件（由LMS提供）放置于D:AMESimv800interfaceslabview目录下即可。 <p>**AMESim模型准备** <p>1.新建一个AMESim模型，并创建接口如图所示： <p>[![clip_image002](http://byfiles.storage.msn.com/y1pe4_ATVC0vfwOb-n8xzrOekFU91zrWu-iG_iCR0e8BTzIJINyhFP06kXOZH4Txlne_QqTe8nG4QY?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1po3tof4rFI5_mWWD5E8M6kNu-6x0rA38mpkznU7925hMUJSuHsHqFB5h6LloOQ_UQ?PARTNER=WRITER) <p>然后，在接口对话框中的‘Type of Interface’下拉菜单中选择LabVIEW Simulation Module，设置input和output的个数，并逐一对每个input和output进行定义： <p>[![clip_image004](http://byfiles.storage.msn.com/y1pEgQ_myF7DvTPrcQywP1zkv-yXIPlOTAAkVe6PpxZCjF7_XH6g7SeHccbbmMM_lF3OKNJmicTsio?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1p9im7NkRoNrK7ojRpsQXLszygmKbC9kCE92qjfitskofSkEa17e-a9BjMbzH-VdfEKyW2LPC-mZk?PARTNER=WRITER) <p>点击‘OK’之后就会生成LabVIEW的接口模块。 <p>2．将接口模块与AMESim模型的其余部分相连接 <p>[![clip_image006](http://byfiles.storage.msn.com/y1p5U1HgNuUqW1DOjZSFI8WsqTaUTVNhVubZiB3NpcQasVc4gbTPY4xximrvEwjykWTmwrH3691j14?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1p7pomi9UCf1O2dQCiOw6wlVCvpUFiW7Yu95dUwfonDtqkO7-as8JjppxgIfLyXbfiodpJh6ovbK0?PARTNER=WRITER) <p>点击‘parameter mode’（参数模式），AMESim会用VC编译器编译模型，并在工作目录下生成和模型相关的dll文件。假设该模型名为labviewAMERT.ame，则该dll文件名为labviewAMERT_.dll。 <p>[![clip_image008](http://byfiles.storage.msn.com/y1pdFBgf1mj3FN5Fnj8sAKs5k4RQgLP6QpZH7glJf96ftnQupVH40_Wu7GOW3ZGUoOUnExIfQx73Os?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pxNhi1Nj5dnDR42w5wVach215S4pUue7K8Tclth4hW3hhLa14Yll4Iqrvx2E9ZAoHX3PU87ssRLE?PARTNER=WRITER) <p>这个dll文件可通过LabVIEW的External Model Interface模块加载到LabVIEW中，用于支持Windows环境下与LabVIEW的非实时偶合仿真。 <p>**准备LabVIEW 仿真VI** <p>LabVIEW 环境配置：安装LabVIEW8.5和RealTime（实时）、Control Design and Simulation（控制设计仿真）模块，安装完成后应如下图所示： <p>[![clip_image010](http://byfiles.storage.msn.com/y1p_BbXluwbeWGsZ8KJbGaMJaYh2Sn4OoYAf3-yT-3xL9KhXREgqGUeeSMdjB8JPSnKn54L9JabtmQ?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pQfuVKbeNuT5Bdjass2x17AwaKmcA578tbJHgtnt5kC6GW5tCbyLCOw10koF9dw0Djc-01PjG7IY?PARTNER=WRITER) <p>找到并起动与LabVIEW的插件Simulation Module中的External Model Interface相关的模板vi。在版本8.5中，该例子为bouncingball.vi，位于C:Program FilesNational InstrumentsLabVIEW 8.5examplessimulationExternal Model InterfaceBouncingBall目录下， <p>注意： 要选择’indirect feedthough’的那个，而不是’direct feedthrough’的那个，否则无法正常运行。 <p>[![clip_image012](http://byfiles.storage.msn.com/y1p3X7x4MTqwfSgL7VZsMWWtYq0g2XeJJZpkAo5jgEYZQb4yh3wvilTfx0PvldxdkeRTPWtrr4iaBM?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pkc49hweQmYJzbMeGS_C-eM_yG7BZKpU9k5Cfhce1Soy85qTfU6p2A7UFy48NLexoihA0I5s_ScA?PARTNER=WRITER) <p>根据模型的具体细节配置External Model Interface Node <p>[![clip_image014](http://byfiles.storage.msn.com/y1p4vcULDORJq8YU6JEtYKSi6rSSRjrZCSK3vjGUIqhdHmghxQTJds1H6C4ioitmwNc-KFINCOYQI8?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pAwYhbUgksRjByNHe49eD_iawqEzuMNJwdWGGzzKSbmfloX1Ja56cdhVkv5DL4FTWP10M0JvIjMI?PARTNER=WRITER) <p>的各个端口，主要包括输入[![clip_image016](http://byfiles.storage.msn.com/y1p2uVSxCZdgnkpItXGTB9buPjqyu1RYdV77FmzqoHxMhVGnU1u_nIf25DuBtgd2V2delZWoLRx-7U?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pX9onthMhUodW9OtcKXbwcqaHqwBRWJFK4_ZAEkZPmYjG0wtg87-l-Lqmtwm8q-ToEIi0S2X5PyQ?PARTNER=WRITER)输出[![clip_image018](http://byfiles.storage.msn.com/y1pbzMaWMsAzAY2Rlw1qa2_o5BlErjJuQoF2ThI8RzwJYS-yJyHlN9YSGTEu-Hje5ByJIxN8lBZZ1A?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pmlDCQ58l1LGp2ZMsSwO3An-I9xGv8vwcTPkil8YrCldBDKm-PGvE5Y9LICkF0vDSn8EicwURuUs?PARTNER=WRITER)端的配置， <p>指定AMESim生成的dll文件[![clip_image020](http://byfiles.storage.msn.com/y1pobV1rPY4wIpWZWrMTZoueAZfWa79cPl29iQsnfSbflbfFwBkmySIYxQGpX1f9aMVVcZm8cZq0Bg?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1p-Xelmp5jhqkImJmq2PEi3_ralqJiKj9fDLWyCTG4oT0554W5ElDO0ynQl6I0pUnM8y-sQSu3eUU?PARTNER=WRITER)。 <p>设置后得到完整的vi，及虚拟控制面板： <p>[![clip_image022](http://byfiles.storage.msn.com/y1pnTlbfpiLipCWrKzmAjMX0WknenWKj7iHqz1xrpGXkNOdoVTfnbOYkLIxvuti4mrpYf7tZHdHrMU?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1psDwgSaWlGIcmkqSAffhFL9PeCVwz8Ua0lpb-11HObHSQFCVWXiT8LLwy2whM-PBntmUgQIePLy8?PARTNER=WRITER) <p>[![clip_image024](http://byfiles.storage.msn.com/y1pBL5D-0xl4nYJalPnjTqRPMpdTu9X4Jz2qDd0poUhgjDwWHRRoLPCusHgeJf-fxxaiL94TcKG6qA?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pqkklFy5C570FgPSrQUiOioIA9rg41vOL64R03Va2a3CLxXdXtMtv1pxOyO5cK4VU?PARTNER=WRITER) <p>保存并关闭LabVIEW，在AMESim中重写文件，强制编译（确保被调用的dll文件能够反映模型的当前设置）并从AMESim中启动LabVIEW VI。 <p>注意：AMESim要处于参数模式下 <p>[![clip_image026](http://byfiles.storage.msn.com/y1pBdiRghfHV3ZlRKoYmvtQjNK0rbdA9XMWQN-ZSiaKdsnfiQsVqv-OZmzI8tBFLO7G3_hCilx_3LE?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pqGeG4f-vnYjJKRgzqqPFZFj6H7q-Gtgv7Z7_nH7SXY2b55h6jDZBtOIRuERi85AVWKh5Iz6Zbe0?PARTNER=WRITER) <p>[![clip_image028](http://byfiles.storage.msn.com/y1poizNdLARcvkgjxFbxFG7vUxFzHbVCTMcKefnQ71-0A66KmFBLfTYv_ZnvJgUjiEgNYtVSysYSMA?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pQ_3tS6awFFFSbTYEoBea1czuTG30zy_expMrP4woUE6rwgn91pcbdrkQnLmYMkT5EFXBLnI0ozo?PARTNER=WRITER) <p>[![clip_image030](http://byfiles.storage.msn.com/y1p_Ywr0lFNau_KyGAuhhC4-nGK13Mk2APzmZqEKeteCE0HNTvJtm5-b1-yMzcqF8aEBZxssaZ0dJs?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1p1dFuXXtcxQz4YrEaQK3qsA-tcFHy0F1_sR5VR2DLMJviRPBJAS_RE78Edfo2gzr89psSXBF6swI?PARTNER=WRITER) <p>[![clip_image032](http://byfiles.storage.msn.com/y1pFqyNTzdQHS2PHbpBAbMZDtVvD6vrQ5cg4Bnn3O3FtAOoyLrMCGtPiitbKOe8-Ys8gnef5sj5OOY?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pPF6XLHJIY-hXXMslsb97CSNWl-1wxLwQMl8kdM7Gaet3IBXnKsqJicw58EAE8MtXV9k8F516joo?PARTNER=WRITER) <p>[![clip_image034](http://byfiles.storage.msn.com/y1pJc88Dn-0d-HRSmgObjWjig3YOZ0ERf64ES5_CXjMXQW9avNL75E9t8UYKo3Zi76LhHuVQ4TmxTU?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pMDSNp5IfNEsKs2CWI6aubS_Hglx7idFT-gnUXVfBnHPoXNjYZhkK92B4YL-LrRSCoOIe5llHMDk?PARTNER=WRITER) <p>在虚拟控制面板中点击‘运行’，即可实现软件在环（Software-in-the-loop），即随意操作输入控制信号，可以看到输出响应的变化，该响应来自于AMESim生成的dll被调用后得到的结果（这个dll文件包含了物理模型的数学方程） <p>[![clip_image036](http://byfiles.storage.msn.com/y1pMPPXajd04rLugrK734k8boOjJ14SNJjVlGC7L-LeOfSKVtbI4XmAQY4w1AhXAnG9cCVUl6xjGT4?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pM8a38VY1XjHSJQ2XP9rZUjp1kejHK6w6IiP5h9BGMYD-y6c-_zG6MnMxOqmU4ms9XeBNiWGJjHw?PARTNER=WRITER) <p>**生成目标机需要的实时dll文件** <p>当前四步正常完成后，即可在AMESim界面下生成目标机所需要的实时dll文件。 <p>[![clip_image038](http://byfiles.storage.msn.com/y1pXUvPnakbZxhZ6eeVDoZzwZGQyIbbRIe8Ew-9KwFpvCYLi_6gZUESnuRjpO1nTpsW511D_B9hfSg?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pwiF5d_DB492-_Wbj5C9UI3zI336qjeolaOkaWTSPO3OxTYJ4N5oN48EAJX_lQ1ydtNppeKwe9RE?PARTNER=WRITER) <p>注意：实时平台的选择要选’LabVIEW SimModule x86:obj’，点击generate。

 [![clip_image040](http://byfiles.storage.msn.com/y1p2AMGuMw8HMqVzqJcQRWSQeLAeVVLebamrL20S0Pzg_BXuxMRPo3rNNfSPUS6BrIrCj1BB-rtV_I?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1p_h1CWcvJ2ROV5A16Rvkd7V9VdLamoUPVzXCVmzxa0ZWz7ekEKqZhQzyBOkYYF0LyqdIY8-hvFYs?PARTNER=WRITER)

此时，在工作目录下面，就会生成一个目标机所需要的实时dll文件。假设你的AMESim模型名为labviewAMERT.ame，则该dll文件名即为labviewAMERT.dll（不带下划线_）。 <p>注意：在目标加载的过程中不要关闭AMESim，并要保证其处于run模式下，等到上传dll文件完毕后再关闭。 <p>**在LabVIEW vi中加载实时的dll文件并生成实时目标代码** <p>上传DLL：打开MAX，选择目标机——右键——文件传输，将labviewAMERT.dll上传到/ni-rt/startup/目录下。 <p>[![clip_image042](http://byfiles.storage.msn.com/y1prbrzN7It5PZPhuc4UX6P2XWXNLKIo9iA0CeXBeqUWoRcb5b9VgTVhprs0fia3vnpqT1rs5VxLv8?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pK-7Wwa6lBGWZJswpF3wIU2DqfdlOmJJ38HA_CmkPF-srNC_ImgZ0Z6290Thk_jTzslxbjcYtH9E?PARTNER=WRITER) <p>[![clip_image044](http://byfiles.storage.msn.com/y1p9ZyDfMK1NsS-i0zFNmRFUfN3RVvhEmtzdDaE0f_rqFDs98JO3zGMux7pfqFPMgFbFLJy44rSL8k?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pncfRoOfWAfzj9Bo-CmOick40ejQwrrs0j6h9kZfnT5QNmIjsYKirIyNNPA09K3WKUi_trQjX8ws?PARTNER=WRITER) <p>[![clip_image046](http://byfiles.storage.msn.com/y1pFtaMuNPX4qXxaSADrq8nXGj0cqBYPMBEOYzqzthEmebTvdoEVlzK7fk5HSiWOqhUP7hcCiy5h7I?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pFa6HlBdJxgjD1vej_t80vE8JiJeLUSdPqkse08VshOFUVsIpv4WKmG4-TlrgMFgp4GffvaYHVCI?PARTNER=WRITER) <p>在LabVIEW中定义目标机，并将要生成实时代码的vi及dll文件拖放到该目标机的项目下 <p>[![clip_image048](http://byfiles.storage.msn.com/y1p7_zhFF1DCos4hwKy3-pag7hcW_7rDf7787dWAH_9a8_DZg0UuYSZTLjVme-ip25pDH9c-1_kj0U?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pGs6wXen0-rkkmhEVhXLqRMgQmZz3Lcd1UueOTyzoo4r3APW-NTfLODLAedJq5DkCbQQ0C0sAulA?PARTNER=WRITER) <p>[![clip_image050](http://byfiles.storage.msn.com/y1pBQcRcxNyWqeDJVt6XrwUdcbXRC1PkgJGtaqXFEdl52ckn62IQA8Jji6slt3SJlia8bVNzx4tXA4?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1peVvefd9XwGBJfX1D7pK2rL0rqm_mR9h7kO0aHufSChjiJO_qBgTyBOyMq9tjRKmOfNNPgzFi6WU?PARTNER=WRITER) <p>[![clip_image052](http://byfiles.storage.msn.com/y1pR_ReflRgWYBiuqfGcDpCWyW7nQb54tTwPGlyGbpHkv1g7ep3RCGAK142IEYDOZ0TkFNiU4ZyPyU?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pKzFz5UNf-W_WmSx-1TMLe0fcmVczutAhOQYCCKiu1X8vd_QcApUQY2Tvk0Ch-77cXCMmQRJaym4?PARTNER=WRITER) <p>上图为对应的vi程序框图，上上图为程序界面。 <p>点击运行即可进行实时仿真。 <p>**发布RT程序** <p>其操作如下：右键点击目标机project下的Build Specification，选择‘Create new real-time application’，并作如下设置： <p>[![clip_image054](http://byfiles.storage.msn.com/y1pjEafPH8VSJ3t1pUoZRYFieftI1cI5c866SrhSxVntu6LRq40BMdB_i05q1CkwWH_ff2BbYJrHsE?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1punwzYsuELPRbi3wwgdZF5a96sC0QXaghgkUtgfgSGfp1gJnxEzNZT4PontgAcbmldpzF-Xk9ogs?PARTNER=WRITER) <p>[![clip_image056](http://byfiles.storage.msn.com/y1pP-o2KKfCDqxrbJgvC4gfMq3I6o1jH5H_eKiWsvBa36IelMWEoOdKTHh2BrfYYXC-X_VnL7icHXE?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pmsTngwCw4BUQSQRbkaCG0Rouk6LxjvG4bpUEtIknBEd2uUN6oCzxXgPNlXhnjes7LkagRTR9_xI?PARTNER=WRITER) <p>点击Build <p>[![clip_image058](http://byfiles.storage.msn.com/y1pDUmz2wqzrrRDlsafp7qCUO7n5rXDATdhkvcV5PfO-R-DqfGj38cufN2BF1qQDa_R6H0r8xG_vAA?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1pLB_TMfsmYRXtLtPKeVFLy7AcwUT9zVcxH4Yl0HA06zUPfvhsUoI9Vs6jUwUEv6fhiZga1M4c-c8?PARTNER=WRITER) <p>通过右键点击My Real-time application，选择Deploy，即可将代码导入到目标机上。 <p>[![clip_image048[1]](http://byfiles.storage.msn.com/y1pJ3JMrJNCiQ0rkR37fCXW0bDLY8Mo0bRfE5ZKDVY6y2eSziqKU7V7VKI_u0Xt_EEZFDkOIAeJ9UQ?PARTNER=WRITER)](http://byfiles.storage.msn.com/y1p_D3SqJR9TR3TTG8NyHNAFegWkwhCHAWYLfGVG7OOyGZ1IjC6OPpK53bFmvaxhs0nLfsJnUyXxt0?PARTNER=WRITER) <p>最后，即可在虚拟控制面板中运行并控制目标了。
</p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></div>